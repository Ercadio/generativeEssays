From Ashok Aiyar Subject Setting up a SLIP client under DOS and Windows long I have been posting monthly how to setup a SLIP client on a PC posts for a few Lots of work and imminent graduation have come in the way of posting one of these for March or earlier this month for which I This file includes information on writing a script for University of Minnesota PHONE and also a batch file hack that lets you use other packet drivers with For additions modifications and corrections I can be reached at Best wishes Ashok begin Based on my experiences on setting up SLIP under DOS and Windows here are my comments on setting up SLIP in this I thank the Trumpet beta testers and the CWRU SLIP beta testers for their Configuring your Modem a Turn off DTR AT W I have to disable DTR because the communication program that I use to dial my SLIP server QMODEM drops DTR when I exit the program and therefore hangs up the If you use a program like Kermit or Conex to establish the SLIP connection then this need not be These programs do not necessarily hangup the line when you NOTE If you use of PHONE to dial and establish a SLIP connection you do not need to turn off b Dial and establish the SLIP connection This can be done automatically if you use a program like PHONE from the University of Minnesota which will dial and establish a SLIP connection then load the SLIP packet The PHONE scripting language is simple and phone scripts can be easily written to configure PHONE to work with other SLIP In addition while the only packet driver that PHONE works with is UMSLIP currently it is easy to write a batch file hack that lets PHONE work with other packet There is a section on PHONE in the document with both script and batch file Configuring the SLIP drivers There are five SLIP packet drivers commonly available Peter Tattam's compressed SLIP driver Peter Tattam's SLIP driver Crynwr driver I like Phil Burn's modified driver Crynwr driver ethernet simulation over SLIP of Minnesota driver based on Of these four I vastly prefer C over or for the following reasons a It is much faster even though my modem has just a UART b While using EtherSLIP UMSLIP myself and several others have noticed that the PC clock gets messed up after performing a long FTP c It supports PKTMUX when used in ethernet simulation mode d When used in Ethernet simulation mode C SLIPPER seem to work with every TCP IP application that I have tested it Instructions for C and you do not use PHONE a Load SLIPPER in your file according to instructions For instance if you have a modem on slipper vec baud b If you use DOS TCP IP applications in Win DOS boxes then use the double ended packet driver shim this creates a virtual packet driver at DOS applications in native mode DOS applications in Windows DOS boxes and Windows applications can all use this virtual driver at c If you use QVT Net load QVT net is configured in to use the interrupt at Instructions for a Try getting a version SLIP Philip Burns of Northwestern University has a modified driver that is better at hardware This driver is distributed along with b Load the driver AFTER establishing the SLIP My modem is a modem on so here is how I would load the w h SLIP c As discussed above if you use DOS TCP IP applications in Windows DOS boxes you probably want to use d If you use WinQVT net load Instructions for If you choose to use instead of the instructions are exactly the same with one crucial You will have to DELETE the line device vcd from the section of This will interfere with running regular Windows Comm applications such as Crosstalk and you will get lots of dropped characters in these This is therefore not ETHERSLIP would be loaded as ethersl w h Configuring Windows a Make the following modifications to the file i List all your COM ports with their addresses and This can also be done from within Windows Control Panel but double clicking on the Ports ii Give the port to which your modem is attached a generous COM buffer iii Change the COM port AutoAssign value for the COM port that you wish to use for your modem to This is the amount of time that Windows waits in seconds before handing control of that COM port to another If you use WinQVT net and then want to switch from one session to another and this value is at the default value of seconds you are will get a GPF and Windows will This can also be done from within Windows Control Double click on Enhanced and under Device Contention set the device contention for the COM port your modem is on to Never Warn Additional notes What to do if you are assigned a different IP address for each SLIP session I am fortunate in that our campus SLIP server assigns each user a permanent IP address so I do not have worry about editing each time that I establish a SLIP If you are assigned a new IP address on every occasion that you dial in please try to use BOOTP aware software and let BOOTP do the configuration for However QVTnet is not BOOTP aware and RARP will not work over a SLIP To get QVTNet working in a situation such as this you must do the following Edit the Let the net section look like this net name ip netmask or whatever is appropriate for you arptime packet vector or whatever is appropriate Save the changes and then write protect this file attrib r Start your slip connection and remember the name and IP address that you are Each time you start QVT net the general configuration dialog box will Enter the name and IP address and you were assigned for that session click on OK and you should be up and The changes you make will not be saved as is write A more elegant solution to the problem of dynamic SLIP IP address assignment is provided by Victor Menayang Victor uses the program bootpq to semi automate qvtnet Bootpq is used to inquire the assigned IP which is then saved to a file called myip Another file noip is essentially a complete file that lacks the IP In the final step myip and noip are copied into a single An example of Victor's batch file is provided below slipper bootpq i ip s myip bootpq i My IP is s copy q net myip noip e com qvtnet del q myip echo off echo echo Ready to run WinQVTnet For questions and more details about bootpq please contact Victor Menayang QPC Software is attempting to add BOOTP capability to WinQVT How do you use PKTMUX over SLIP PKTMUX will not work over the packet driver and crashes immediately if used with PKTMUX will work with C when C SLIPPER is used in ethernet simulation An example of this configuration is shown below The latest release of PKTMUX is and it is important that you use this version if you want to use virtual packet drivers with applications like Trumpet for Windows to be released very shortly from lh c slipper vec baud ether packet driver lh pktmux pktmux loaded for virtual packet drivers lh pktdrv first virtual packet driver used for QVT net lh QVT net pktdrv PKTDRV for use in native DOS or WinTrumpet Additional virtual packet drivers can be loaded directly from within Windows DOS For example my PIF file to load POPmail is directed to the file This is what reads like pktdrv loads a virtual packet driver at cd popmail popmail cd pktdrv u unloads the packet driver at exit causes the DOS window to close I have similar batch files that load other DOS TCP IP applications like PC It is my experience that PKTMUX works fine even if the virtual packet drivers in two independent virtual DOS sessions are loaded at the same software For example within two different DOS boxes one for POPmail and the other for Gopher the virtual packet driver pktdrv is loaded at in each How much does PKTMUX degrade the performance of C SLIPPER I have a modem in a running Windows with a reasonably fast video card ATI Graphics Ultra Under these conditions when I have three virtual packet drivers loaded and being used as follows a Driver at QVTNet FTP client session b Driver at in one DOS Window CUTCP session c Driver at in another DOS Window Trumpet for DOS I get FTP transfer rates of kb sec while transferring compressed This rate is comparable to that which I get with loaded as a packet driver and where a single TCP IP session is If CSLIPPER is used a packet driver and a single session is active I get transfer rates of kb sec on the same While there is about degradation in the performance of SLIPPER for me the benefits of being able to use PKTMUX outweigh the performance C SLIPPER and ethernet simulation mode In ethernet simulation mode C SLIPPER ver works with all the applications that I have tested it One or two applications that required ethernet simulation balked at C SLIPPER but even these rare problems have been resolved with ver When SLIPPER is used in ethernet simulation mode and used with PKTMUX I get some an error message in the QVTNet Console window that reads IP incorrect packet type or IP bad version number This does not seem to prevent QVTnet from functioning although I cannot comment on loss of What can you do if your DOS TCP IP application does not work with C SLIPPER in ethernet simulation mode In the rare event that you find a package that does not work with C SLIPPER in ethernet simulation mode first contact the author Peter Tattam PETER and let him Chances are that he can fix In the meanwhile you can try the I do not know if it is kosher but it worked when I had problems with C SLIPPER ver C SLIPPER is loaded at as described above under the PKTMUX section I load at run the application and then terminate This also works within Windows virtual DOS However a packet driver like ETHERSL can be used in only one virtual DOS box at a So for example here is my batch file to run Grateful Med a medical reference retrieval program developed at the National Library of Medicine ethersl w h loads ETHERSLIP cd search cd termin terminates ETHERSLIP exit closes the DOS box and returns me to Windows If you use this method be cautious about one thing don't have any active PKTMUX DOS sessions open at the same After closing the ETHERSL window you can run your PKTMUX DOS sessions with no BTW the example above Grateful Med works with no problems with C SLIPPER ver PHONE Script Files The documentation that accompany PHONE provide good instructions on writing script files to get PHONE to dial SLIP servers other than the University of Minnesota For example here is a script that I use to dial a CISCO server at the University that I Background To start a SLIP connection I dial our terminal server and login with a username and After doing so I start a SLIP session with the following command slip username followed by my password Here then is the relevant portion of the script file CWRU SLIP login script by Ashok Aiyar Last revised Procedure TimeOut 'CWRU terminal server is not responding' Message CWRU SLIP login script Version Message 'Waiting for SLIP server to respond' Quiet ON Expect 'Verification' Message 'Request for User Verification Received from CWRU ' Message 'Sending your user name and password' Quiet OFF Expect 'Username ' Send ' u ' Expect 'Password ' Private Send ' p ' Reject 'Access denied' 'Your user name or password was not accepted' TimeOut 'SLIP server did not respond to your validation request' Expect 'CWRU ' Send 'SLIP ' TimeOut 'SLIP server did not respond to SLIP command' Expect 'IP hostname or address ' Send ' u ' TimeOut 'SLIP server did not respond to hostname' Reject 'Bad IP address' 'Incorrect Hostname' Expect 'Password ' Send ' p ' Reject 'Access denied' 'Password not ' TimeOut Expect 'Header Compression will match your system' Message 'Login to CWRU SLIP server successful' Wait EndProcedure Procedure Nothing special needs to be done to logout EndProcedure End of Script file How to use packet drivers other than UMSLIP with PHONE The quick answer there is no clean Below is a batch file hack that I wrote to use PHONE with other packet In this example the packet driver is Peter Tattam's To use a batch file like this you must know the parameters with which you plan to use the packet driver interrupt vector baud rate port address and This batch file requires and to be in the same directory or in your path All that the BATCH file does is to let you dial the SLIP connection using PHONE load the appropriate packet driver hangup the connection and unload the driver when you are done being echo off rem this batch file is an ugly hack of of rem awaiting a version of C SLIPPER that can directly interact rem with PHONE rem file is used with to start a SLIP rem connection on CWRU rem last modified Ashok Aiyar echo off cls goto start start if goto help if goto help if goto setup if goto forceD if goto forceH if goto forceH if goto help if goto setup if goto forceD if goto forceH goto bogus goto unload forceH termin umslip nul phone force hangup goto unload slipper termin REM the following line must be changed to reflect the COM port REM IRQ baud rate and software interrupt lh c packet cslipper vec baud ether goto end forceD termin umslip nul phone force dial goto slipper setup termin umslip nul phone setup goto help unload termin goto end bogus echo is not a valid echo Try cwruslip help for a list of valid commands help echo echo Case Western Reserve University SLIP Setup echo using of Minnesota PHONE echo echo cwruslip setup modem settings phone number username echo cwruslip dial DIAL and establish the SLIP connection echo cwruslip quit HANGUP the phone and unload the driver echo cwruslip help this screen end end Where to Get Peter Tattam's programs are archived at C SLIPPER and the Trumpet set of programs WinQVT net is generally archived at most Windows FTP sites including NCSA Telnet is archived at NuPOP is archived at POPmail PC SLIPDISK PHONE and PC Gopher are archived at end Ashok Aiyar Mail Department of Biochemistry Tel CWRU School of Medicine Cleveland Ohio Fax