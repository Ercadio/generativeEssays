From david pop David Smyth Subject Re table widget causing trouble with XtQueryGeometry I just got a bug report and a fix for this exact problem from Greg Fisher the most serious problem I have identified has not been This problem occurs when the Table widget's GeometryManager is invoked by a This will work correctly if the table widgets parent complies with the Xt However if they do not as is the case for some Motif widgets and they ignore XtCWQueryOnly then the sizing will be In order to see this problem the following events must happen A child of the table widget must request a new The table widget must query its parent for a new size having set The parent must ignore the XtCWQueryOnly bit and resize the table As part of the resize XmpTableForgetProposedLayout is This will set tw cols and tw rows to The table will continue setting up the new size working under the assumption that it is working with a proposed and not actual At the end it will call This will save tw and tw and restore their values from tw cols and tw However these have already been set to Since the table widget has already been resized it will not need a second Next another widget managed by some ancestor of the table is This results in the parent of the table requesting the tables preferred Since tw and tw are zero this will return as the preferred The parent is very likely to grant this request resulting in a loss of the whole table from the He isolated the problem a proposed a workaround which seems precisely Here is the new implementation of XmpTableNewProposedLayout which will be released with the next update in weeks Xmp void XmpTableNewProposedLayout tw XmpTableWidget tw XmpTableConsiderSameSize tw XmpTableProposedColsAndRows tw XmpTableQueryParentForResize tw query only no resize Since we only made a query we should still need to However Motif is broken so that we actually may already have been In that case the proposed layout is already forgotten so we should just quietly if tw status RSdueToRequest XmpTableMakeColsFitQueryWidth tw XmpTableMakeRowsFitQueryHeight tw XmpTableGetProposedChildSize tw XmpTableSaveProposedLayout tw else the resize has already been Our proposed layout would have been forgotten in the The XpTable the fix is identical except of course for the names Xp void XpTableNewProposedLayout tw XpTableWidget tw XpTableConsiderSameSize tw XpTableProposedColsAndRows tw XpTableQueryParentForResize tw query only no resize Since we only made a query we should still need to However some manager widgets are broken so that we actually may already have been In that case the proposed layout is already forgotten so we should just quietly if tw status RSdueToRequest XpTableMakeColsFitQueryWidth tw XpTableMakeRowsFitQueryHeight tw XpTableGetProposedChildSize tw XpTableSaveProposedLayout tw else the resize has already been Our proposed layout would have been forgotten in the David Smyth Senior Software Engineer do NOT use v mail yet CCCP X and Object office Jet Propulsion Lab M S Oak Grove Drive Pasadena CA That Sun Windows thingy what's it called You know its really X Motif That's it Motif Yuck