From Hong Yang Subject colormap question Hi Experts I'm kind of new to The following question is strange to I am trying to modify the contents of the colormap but failed without reason to me I am using the following piece of code toplevel XtInitialize argv Testcolor NULL argc argv dpy XtDisplay toplevel scr DefaultScreen dpy def colormap DefaultColormap dpy scr if XAllocColorCells dpy def colormap True NULL cells cells DoRed DoGreen DoBlue XStoreColor dpy def colormap color printf n Try to allocate the color d as d d d XQueryColor dpy def colormap color printf n After allocate the color d is d d d else printf n Error couldn't allocate color cells Running output Try to allocate the color as After allocate the color is After XStoreColor XQueryColor just returned the original No failure error displayed but the contents of colormap are obvious I also tried to draw a line using the colors but it turned out to be the unmodified So what is my problem How to modify the contents of the colormap Any help information will be Please send mail to William email By the way the following is the environment I am using output of xdpyinfo It shows the default visual is version number vendor string DECWINDOWS DigitalEquipmentCorporation vendor release number maximum request size longwords bytes motion buffer size bitmap unit bit order padding LSBFirst image byte order LSBFirst number of supported pixmap formats supported pixmap formats depth bits per pixel scanline pad depth bits per pixel scanline pad keycode range minimum maximum number of extensions Adobe DPS Extension DPSExtension SHAPE MIT SHM Multi Buffering XInputExtension MIT SUNDRY NONSTANDARD DEC XTRAP default screen number number of screens screen dimensions pixels millimeters resolution dots per inch depths root window id depth of root window planes number of colormaps minimum maximum default colormap default number of colormap cells preallocated pixels black white options backing store YES save unders YES current input event mask KeyPressMask ButtonPressMask ButtonReleaseMask EnterWindowMask SubstructureRedirectMask PropertyChangeMask ColormapChangeMask number of visuals default visual id visual visual id class PseudoColor depth planes size of colormap entries red green blue masks significant bits in color specification bits visual visual id class GrayScale depth planes size of colormap entries red green blue masks significant bits in color specification bits visual visual id class StaticGray depth planes size of colormap entries red green blue masks significant bits in color specification bits visual visual id class StaticColor depth planes size of colormap entries red green blue masks significant bits in color specification bits visual visual id class TrueColor depth planes size of colormap entries red green blue masks significant bits in color specification bits number of mono multibuffer types visual id max buffers depth visual id max buffers depth visual id max buffers depth visual id max buffers depth visual id max buffers depth number of stereo multibuffer types