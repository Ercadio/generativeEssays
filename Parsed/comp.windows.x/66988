From Siegfried Kaiser Subject table widget causing trouble with XtQueryGeometry Contents Problems with table widgets in The following part of a program an user interface for a simulation system did work in but refused to in Of cause the version did not know about the xpTableWidgetClass we used tableWidgetClass instead caught from the net in times of and XpTableChildPosition formerly XtTblPosition Since compiling with the program causes a zero width or height error on sparc stations The trouble shooter is the re computation of the model init table table widget though its childs label and asciiText widgets exist XtQueryGeometry returns a prefered width and height of Thus the following asignment cannot perform anything else but set the width and height of the newly created widget to No wonder XtPopup or XtManage Child create zero width or height errors dependent on whether width and height of the shell widget are set in the resource file or not Question Does anyone know why XtQueryGeometry returns so low prefered values when working on table widgets or perhaps what to do about I'll be happy if someone is able to help Germans are requested to answer in Siegfried Kaiser email The part of interest Graphischer Neuaufbau des Model Init Formulars Storing the old width and height of the viewport widget which is the parent of the troubling table widget before the viewport widget is destroyed The destroying of widgets before resizing them is a relict from age if model init popped up XtUnmapWidget model init form view XtDestroyWidget model init form view Creating the subtree within the shell of which the root is the viewport widget n XtSetArg args n XtNfromVert model init title n XtSetArg args n XtNfromHoriz model init button view n XtSetArg args n XtNallowVert True n XtSetArg args n XtNforceBars True n model init form view XtCreateWidget form view viewportWidgetClass model init form args n n model init table XtCreateWidget table xpTableWidgetClass model init form view args n create form widget does create and position table widget's To position them it uses XpTable ChildPosition in and XtTblPosition in create form widget ptr model init obj model init table The crucial function call intended to return the maximum height possible if there isn't sufficient space to show the whole table widget then the viewport shall grow as large as possible but not beyond the border of If there is enough space the window is intended to shrienk to the smallest possible XtQueryGeometry model init table NULL pref According to the algorithms idea the new value of viewport widget's height is Unfortunately leads to new height if form view height new height else new height form view height Setting the new values to viewport widgets ancestors w XtNameToWidget model init form form view XtResizeWidget w width new height width XtResizeWidget model init form view width new height width if model init popped up In case the shell which contains model init form view and model init table allready exists is has to be resized n XtSetArg args n XtNwidth shell width n XtSetArg args n XtNheight shell height n XtSetArg args n XtNborderWidth shell bw n XtGetValues model init shell args n XtResizeWidget model init shell shell width shell height height new height shell bw end of if n XtSetArg args n XtNwidth width n XtSetArg args n XtNborderWidth bw n XtGetValues model init button view args n XtResizeWidget model init button view width new height bw XtResizeWidget vert bar sbar width sbar bw resize inits If there is the shell's height set within the resource file the program terminates within the first XtManageChild on its second pass through the observed The first pass XtManageChild model init form view XtManageChild model init table if model init popped up In case the shell isn't popped up it has to be If there is no value set to the shell's height within the resource file the program terminates XtPopup model init shell XtGrabNone model init pop flag True set model init attributes end of if get actual init ptr actual load form ptr actual If someone suspects the creation of table widget's contents causes all the trouble there are the sources of create form create form widget ptr table t obj ptr Widget table ptr is a linear list containing attributes and para meters of the model and additionally the correspon ding widgets Arg args int n row col t obj ptr obj t ident ptr ident Initialization of the local variables ptr obj ptr col row Schleife ueber die Objekte das Pseudo Objekt fuer die Parameter loop through the list of objects and pseudo objects every object occuring in the model has zero or more attributes and some parameters which can be shared by several Because of locality the attributes of one object are listed in a second linear list of type t ident whereas the parameters which can belong to any ob ject are put together in a pseudo object Thus the program loops through the list of objects and pseudo objects and for each object through the list of its attributes while ptr obj t obj NULL Each object and pseudo object is represented in a label widget n XtSetArg args n XtNlabel ptr obj name n ptr obj label w XtCreateManagedWidget object labelWidgetClass table args n XpTableChildPosition ptr obj label w col row col row ptr ident ptr obj ident Schleife ueber die Objekt Attribute Parameter while ptr ident t ident NULL Each attribute and parameter is represented in a label and has a corresponding asciiText widget in which it is to be n XtSetArg args n XtNlabel ptr ident name n ptr ident label w XtCreateManagedWidget ident labelWidgetClass table args n XpTableChildPosition ptr ident label w col row col n XtSetArg args n XtNlength ROW LENGTH n XtSetArg args n XtNstring ptr ident text n XtSetArg args n XtNeditType XawtextEdit n XtSetArg args n XtNwrap XawtextWrapWord n XtSetArg args n XtNresize XawtextResizeHeight n XtSetArg args n XtNuseStringInPlace True n ptr ident text w XtCreateManagedWidget text asciiTextWidgetClass table args n XpTableChildPosition ptr ident text w col row col row get next ident ptr ident end of while col get next obj ptr obj end of while end of create form widget So far the problem in