From tgl Tom Lane Subject JPEG image compression Frequently Asked Questions Archive name jpeg faq Last modified May This FAQ article discusses JPEG image Suggestions for additions and clarifications are New since version of May Added info on ImageViewer for This article includes the following sections What is JPEG Why use JPEG When should I use JPEG and when should I stick with GIF How well does JPEG compress images What are good quality settings for JPEG Where can I get JPEG software canned software viewers source code What's all this hoopla about color quantization How does JPEG work What about lossless JPEG Why all the argument about file formats How do I recognize which file format I have and what do I do about it What about arithmetic coding Does loss accumulate with repeated compression decompression What are some rules of thumb for converting GIF images to JPEG Sections are basic info that every JPEG user needs to know sections are advanced info for the This article is posted every You can always find the latest version in the archive at By FTP fetch pub usenet jpeg faq or if you don't have FTP send e mail to with body send usenet jpeg faq Many other FAQ articles are also stored in this For more instructions on use of the archive send e mail to the same address with the words help and index no quotes on separate If you don't get a reply the server may be misreading your return address add a line such as path myname mysite to specify your correct e mail address to reply What is JPEG JPEG pronounced jay peg is a standardized image compression JPEG stands for Joint Photographic Experts Group the original name of the committee that wrote the JPEG is designed for compressing either full color or gray scale digital images of natural real world It does not work so well on non realistic images such as cartoons or line JPEG does not handle black and white bit per pixel images nor does it handle motion picture Standards for compressing those types of images are being worked on by other committees named JBIG and MPEG JPEG is lossy meaning that the image you get out of decompression isn't quite identical to what you originally put The algorithm achieves much of its compression by exploiting known limitations of the human eye notably the fact that small color details aren't perceived as well as small details of light and Thus JPEG is intended for compressing images that will be looked at by If you plan to machine analyze your images the small errors introduced by JPEG may be a problem for you even if they are invisible to the A useful property of JPEG is that the degree of lossiness can be varied by adjusting compression This means that the image maker can trade off file size against output image You can make extremely small files if you don't mind poor quality this is useful for indexing image archives making thumbnail views or icons Conversely if you aren't happy with the output quality at the default compression setting you can jack up the quality until you are satisfied and accept lesser Why use JPEG There are two good reasons to make your image files smaller and to store bit per pixel color data instead of bit per pixel Making image files smaller is a big win for transmitting files across networks and for archiving libraries of Being able to compress a Mbyte full color file down to Kbytes or so makes a big difference in disk space and transmission time If you are comparing GIF and JPEG the size ratio is more like four to More details If your viewing software doesn't support JPEG directly you'll have to convert JPEG to some other format for viewing or manipulating Even with a JPEG capable viewer it takes longer to decode and view a JPEG image than to view an image of a simpler format GIF for instance Thus using JPEG is essentially a time space tradeoff you give up some time in order to store or transmit an image more It's worth noting that when network or phone transmission is involved the time savings from transferring a shorter file can be much greater than the extra time to decompress the I'll let you do the arithmetic The other reason why JPEG will gradually replace GIF as a standard Usenet posting format is that JPEG can store full color information bits pixel million colors instead of or less or fewer colors If you have only bit display hardware then this may not seem like much of an advantage to Within a couple of years though bit GIF will look as obsolete as black and white MacPaint format does Furthermore for reasons detailed in section JPEG is far more useful than GIF for exchanging images among people with widely varying color display Hence JPEG is considerably more appropriate than GIF for use as a Usenet posting When should I use JPEG and when should I stick with GIF JPEG is not going to displace GIF entirely for some types of images GIF is superior in image quality file size or One of the first things to learn about JPEG is which kinds of images to apply it As a rule of thumb JPEG is superior to GIF for storing full color or gray scale images of realistic scenes that means scanned photographs and similar JPEG is superior even if you don't have bit display hardware and it is a LOT superior if you See section for GIF does significantly better on images with only a few distinct colors such as cartoons and line In particular large areas of pixels that are all exactly the same color are compressed very efficiently indeed by JPEG can't squeeze these files as much as GIF does without introducing visible This sort of image is best kept in GIF In particular single color borders are quite cheap in GIF files but they should be avoided in JPEG JPEG also has a hard time with very sharp edges a row of pure black pixels adjacent to a row of pure white pixels for Sharp edges tend to come out blurred unless you use a very high quality Again this sort of thing is not found in scanned photographs but it shows up fairly often in GIF files borders overlaid text The blurriness is particularly objectionable with text that's only a few pixels If you have a GIF with a lot of small size overlaid text don't JPEG Computer drawn images ray traced scenes for instance usually fall between scanned images and cartoons in terms of The more complex and subtly rendered the image the more likely that JPEG will do well on The same goes for semi realistic artwork fantasy drawings and such Plain black and white two level images should never be converted to You need at least about gray levels before JPEG is useful for gray scale It should also be noted that GIF is lossless for gray scale images of up to levels while JPEG is If you have an existing library of GIF images you may wonder whether you should convert them to You will lose a little image quality if you Section which argues that JPEG image quality is superior to GIF only applies if both formats start from a full color If you start from a GIF you've already irretrievably lost a great deal of information JPEG can only make things However the disk space savings may justify converting This is a decision you'll have to make for If you do convert a GIF library to JPEG see section for Be prepared to leave some images in GIF format since some GIFs will not convert How well does JPEG compress images Pretty darn Here are some sample file sizes for an image I have handy a full color image of a ship in a The first three files are for comparison purposes the rest were created with the free JPEG software described in section File Size in bytes Comments Original file in PPM format no compression bits or bytes per pixel plus a few bytes overhead PPM file passed through Unix compress compress doesn't accomplish a lot you'll Other text oriented compressors give similar Converted to GIF with ppmquant fs ppmtogif Most of the savings is the result of losing color info GIF saves bits pixel not See cjpeg Q highest useful quality setting This is indistinguishable from the bit original at least to my nonprofessional cjpeg Q default setting You have to look mighty darn close to distinguish this from the original even with both on screen at cjpeg Q This has slight defects if you know what to look for you could tell it's been JPEGed without seeing the Still as good image quality as many recent postings in Usenet pictures cjpeg Q JPEG's characteristic blockiness becomes apparent at this setting djpeg blocksmooth helps some Still I've seen plenty of Usenet postings that were of poorer image quality than cjpeg Q optimize optimize cuts table overhead Blocky but perfectly satisfactory for preview or indexing Note that this file is TINY the compression ratio from the original is In this case JPEG can make a file that's a factor of four or five smaller than a GIF of comparable quality the Q file is every bit as good as the GIF better if you have a full color display This seems to be a typical ratio for real world What are good quality settings for JPEG Most JPEG compressors let you pick a file size image quality tradeoff by selecting a quality There seems to be widespread confusion about the meaning of these Quality does NOT mean keep of the information as some have The quality scale is purely arbitrary it's not a percentage of The name of the game in using JPEG is to pick the lowest quality setting smallest file size that decompresses into an image indistinguishable from the This setting will vary from one image to another and from one observer to another but here are some rules of The default quality setting Q is very often the best This setting is about the lowest you can go without expecting to see defects in a typical Try Q first if you see defects then go Except for experimental purposes never go above Q saying Q will produce a file two or three times as large as Q but of hardly any better If the image was less than perfect quality to begin with you might be able to go down to Q without objectionable On the other hand you might need to go to a HIGHER quality setting to avoid further The second case seems to apply much of the time when converting GIFs to The default Q is about right for compressing bit images but Q to is usually better for converting GIFs see section for more info If you want a very small file say for preview or indexing purposes and are prepared to tolerate large defects a Q setting in the range of to is about Q or so may be amusing as op art Note the quality settings discussed in this article apply to the free JPEG software described in section and to many programs based on Other JPEG implementations such as Image Alchemy may use a completely different quality Some programs don't even provide a numeric scale just high medium low style Where can I get JPEG software Most of the programs described in this section are available by If you don't know how to use FTP see the FAQ article How to find sources If you don't have direct access to FTP read about ftpmail servers in the same That article appears regularly in or you can get it by sending e mail to with send usenet finding sources in the The Anonymous FTP List FAQ may also be helpful it's usenet ftp list faq in the NOTE this list changes If you have a copy more than a couple months old get the latest JPEG FAQ from the If you are looking for canned software viewers etc The first part of this list is system specific programs that only run on one kind of If you don't see what you want for your machine check out the portable JPEG software described at the end of the Note that this list concentrates on free and shareware programs that you can obtain over Internet but some commercial programs are listed X Windows XV shareware is an excellent viewer for JPEG GIF and many other image It can also do format conversion and some simple image It's available for FTP from file contrib xv Version is a major upgrade with support for bit displays and many other improvements however it is brand new and still has some bugs If you prefer not to be on the bleeding edge stick with version also available from Note that version is not a good choice if you have a bit display you'll get only bit color nor for converting bit images to But works fine for converting GIF and other bit images to CAUTION there is a glitch in version be sure to check the save at normal size checkbox when saving a JPEG file or the file will be Another good choice for X Windows is John Cristy's free ImageMagick package also available from file contrib This package handles many image processing and conversion The ImageMagick viewer handles bit displays correctly for colormapped displays it does better though slower color quantization than XV or the basic free JPEG Both of the above are large complex If you just want a simple image viewer try xloadimage or xloadimage supports JPEG in its latest release xloadimage is free and available from file contrib xloadimage xli is a variant version of xloadimage said by its fans to be somewhat faster and more robust than the The current xli is indeed faster and more robust than the current xloadimage at least with respect to JPEG files because it has the IJG decoder while xloadimage is using a hacked over The next xloadimage release will fix xli is also free and available from file contrib Both programs are said to do the right thing with bit MS DOS This covers plain DOS for Windows or OS programs see the next One good choice is Eric Praetzel's free DVPEG which views JPEG and GIF The current version is available by FTP from file pub jpeg viewers This is a good basic viewer that works on either or The user interface is not flashy but it's Another freeware JPEG GIF TGA viewer is Mohammad Rezaei's The current version is available from and mirror sites see NOTE below file msdos graphics Hiview requires a or better CPU and a VCPI compatible memory manager and work Windows and OS do not Hiview is currently the fastest viewer for images that are no bigger than your For larger images it scales the image down to fit on the screen rather than using panning scrolling as most viewers do You may or may not prefer this approach but there's no denying that it slows down loading of large images Note installation is a bit tricky read the directions carefully A shareware alternative is ColorView for DOS This is easier to install than either of the two freeware Its user interface is also much spiffier looking although personally I find it harder to use more keystrokes inconsistent It is faster than DVPEG but a little slower than Hiview at least on my For images larger than screen size DVPEG and ColorView seem to be about the same speed and both are faster than The current version is available from and mirror sites see NOTE below file msdos graphics Requires a VESA graphics driver if you don't have one look in or vesa from the same Many recent PCs have a built in VESA driver so don't try to load a VESA driver unless ColorView complains that the driver is A second shareware alternative is Fullview which has been kicking around the net for a while but I don't know any stable archive location for The current rather old version is inferior to the above viewers The author tells me that a new version of Fullview will be out shortly and it will be submitted to the archives at that The well known GIF viewer CompuShow CSHOW supports JPEG in its latest revision However CSHOW's JPEG implementation isn't very good it's slow about half the speed of the above viewers and image quality is poor except on hi color Too bad it'd have been nice to see a good JPEG capability in Shareware Available from and mirror sites see NOTE below file msdos gif Due to the remarkable variety of PC graphics hardware any one of these viewers might not work on your particular If you can't get any of them to work you'll need to use one of the following conversion programs to convert JPEG to GIF then view with your favorite GIF If you have hi color hardware don't use GIF as the intermediate format try to find a TARGA capable viewer is reputed to do the right thing with hi color The Independent JPEG Group's free JPEG converters are FTPable from and mirror sites see NOTE below file msdos graphics or if you have a and extended memory These files are DOS compilations of the free source code described in section they will convert JPEG to and from GIF Targa and PPM Handmade Software offers free JPEG GIF conversion tools These are slow and are limited to conversion to and from GIF format in particular you can't get bit color output from a The major advantage of these tools is that they will read and write HSI's proprietary JPEG format as well as the Usenet standard JFIF Since HSI format files are rather widespread on BBSes this is a useful Version of these tools is free prior versions were shareware Get it from and mirror sites see NOTE below file msdos graphics NOTE do not use HSI format for files to be posted on Internet since it is not readable on non PC Handmade Software also has a shareware image conversion and manipulation package Image This will translate JPEG files both JFIF and HSI formats to and from many other image It can also display A demo version of Image Alchemy version is available from and mirror sites see NOTE below file msdos graphics NOTE ABOUT The Internet's key archive site for PC related programs is full name wsmr runs a non Unix system with weird directory names where this document refers to directory eg msdos graphics at that really means If you are not physically on MILnet you should expect rather slow FTP transfer rates from There are several Internet sites that maintain copies mirrors of the archives most FTP users should go to one of the mirror sites A popular USA mirror site is which keeps files in eg pub msdos graphics If you have no FTP capability you can retrieve files from by e mail see informational postings in to find out If you are outside the USA consult the same newsgroup to learn where your nearest mirror Microsoft Windows There are several Windows programs capable of displaying JPEG Windows viewers are generally slower than DOS viewers on the same hardware due to Windows' system Note that you can run the DOS conversion programs described above inside a Windows DOS The newest entry is WinECJ which is free and EXTREMELY Version is available from file pub bryanw pc jpeg Requires Windows and or more colors This is a no frills viewer with the bad habit of hogging the machine completely while it decodes and the image quality is noticeably worse than other But it's so fast you'll use it anyway at least for JView is freeware fairly fast has good on line help and can write out the decompressed image in Windows BMP format but it can't create new JPEG files and it doesn't view JView also lacks some other useful features of the shareware viewers such as brightness adjustment but it's an excellent basic The current version is available from file pub pc desktop Mirrors of this archive can be found at some other Internet sites including WinJPEG shareware displays JPEG GIF Targa TIFF and BMP image files it can write all of these formats too so it can be used as a It has some other nifty features including color balance adjustment and The current version is available from and mirror sites see NOTE above file msdos This is a slow compatible version if you register you'll get the only version which is roughly ColorView is another shareware entry This was an early and promising contender but it has not been updated in some time and at this point it has no real advantages over If you want to try it anyway the current version is available from file pub pc desktop I understand that a new version will be appearing once the authors are finished with ColorView for DVPEG see DOS heading also works under Windows but only in full screen mode not in a OS The following files are available from Note check pub uploads for more recent versions the hobbes moderator is not very fast about moving uploads into their permanent pub graphics bit version of free IJG conversion programs version pub all graphics bit version of same for OS pub graphics Image Archiver image conversion viewing with PM graphical Strong on conversion functions viewing is a bit Shareware pub graphics PMJPEG OS port of WinJPEG a popular viewer for Windows see description in Windows section Shareware pub graphics PMView JPEG GIF BMP Targa PCX GIF viewing very fast JPEG viewing roughly the same speed as the above two Has image manipulation slideshow Shareware Macintosh Most Mac JPEG programs rely on Apple's JPEG implementation which is part of the QuickTime system extension so you need to have QuickTime To use QuickTime you need a or better CPU and you need to be running System or If you're running System you must also install the bit QuickDraw extension this is built in on System You can get QuickTime by FTP from file dts mac quicktime As of this file contains QuickTime which is better than QT in several With respect to JPEG it is marginally faster and considerably less prone to crash when fed a corrupt JPEG However some applications seem to have compatibility problems with QT Mac users should keep in mind that QuickTime's JPEG format PICT JPEG is not the same as the Usenet standard JFIF JPEG See section for If you post images on Usenet make sure they are in JFIF Most of the programs mentioned below can generate either The first choice is probably JPEGView a free program for viewing images that are in JFIF format PICT JPEG format or GIF It also can convert between the two JPEG The current version is a big improvement over prior Get it from sumex file info mac app jpeg view Requires System and On bit displays JPEGView usually produces the best color image quality of all the currently available Mac JPEG JPEGView can view large images in much less memory than other Mac viewers in fact it's the only one that can deal with JPEG images much over pixels on a typical Given a large image JPEGView automatically scales it down to fit on the screen rather than presenting scroll bars like most other You can zoom in on any desired portion Some people like this behavior some don' Overall JPEGView's user interface is very well thought GIFConverter a shareware image viewer converter supports JFIF and PICT JPEG as well as GIF and several other image The latest version is Get it from sumex file info mac art gif gif converter Requires System or GIFConverter is not better than JPEGView as a plain JPEG GIF viewer but it has much more extensive image manipulation and format conversion capabilities so you may find it worth its shareware fee if you do a lot of playing around with Also the newest version of GIFConverter can load and save JFIF images without QuickTime so it is your best bet if your machine is too old to run But it's faster with Note If GIFConverter runs out of memory trying to load a large JPEG try converting the file to GIF with JPEG Convert then viewing the GIF JPEG Convert a Mac version of the free IJG JPEG conversion utilities is available from sumex file info mac app jpeg convert This will run on any Mac but it only does file conversion not You can use it in conjunction with any GIF Previous versions of this FAQ recommended Imagery JPEG a JPEG GIF converter based on an old version of the IJG If you are using this program you definitely should replace it with JPEG Apple's free program PictPixie can view images in JFIF QuickTime JPEG and GIF format and can convert between these You can get PictPixie from file dts mac quicktime Requires PictPixie was intended as a developer's tool and it's really not the best choice unless you like to fool around with Some of its drawbacks are that it requires lots of memory it produces relatively poor color image quality on anything less than a bit display and it has a relatively unfriendly user Worse PictPixie is an unsupported program meaning it has some minor bugs that Apple does not intend to There is an old version of PictPixie called PICTCompressor floating around the If you have this you should trash it as it's even Also the QuickTime Starter Kit includes a much cleaned up descendant of PictPixie called Picture Note that Picture Compressor is NOT free and may not be distributed on the Storm Technology's Picture Decompress is a free JPEG viewer This rather old program is inferior to the above programs in many ways but it will run without System or QuickTime so you may be forced to use it on older It does need bit QuickDraw so really old machines can't use You can get it from sumex file info mac app picture decompress You must set the file type of a downloaded image file to 'JPEG' to allow Picture Decompress to open If your machine is too old to run bit QuickDraw a Mac Plus for instance GIFConverter is your only choice for single program JPEG If you don't want to pay for GIFConverter use JPEG Convert and a free GIF More and more commercial Mac applications are supporting JPEG although not all can deal with the Usenet standard JFIF Adobe Photoshop version or later can read and write JFIF format JPEG files use the JPEG plug in from the Acquire menu You must set the file type of a downloaded JPEG file to 'JPEG' to allow Photoshop to recognize Amiga Most programs listed in this section are stored in the AmiNet archive at There are many mirror sites of this archive and you should try to use the closest In the USA a good choice is look under mirrors HamLab Plus is an excellent JPEG viewer converter as well as being a general image manipulation It's cheap shareware and can read several formats besides The current version is A demo version is available from and mirror sites file amiga gfx edit The demo version will crop images larger than but it is otherwise fully shareware is an image renderer that can display JPEG ILBM and GIF The program can be used to create animations even capturing frames on the fly from rendering packages like The current version is available from and mirror sites file amiga gfx Note although this directory is supposedly for AmigaDOS programs the program will also run under AmigaDOS or Viewtek is a free JPEG ILBM GIF ANIM The current version is available from and mirror sites file amiga gfx show If you're willing to spend real money there are several commercial packages that support Two are written by Thomas Krehbiel the author of and These are CineMorph a standalone image morphing package and ImageFX an impressive bit image capture conversion editing painting effects and prepress package that also includes Both are distributed by Great Valley Art Department Professional ADPro from ASDG Inc is the most widely used commercial image manipulation software for ImageMaster from Black Belt Systems is another well regarded commercial graphics package with JPEG The free IJG JPEG software is available compiled for Amigas from and mirror sites in directory amiga gfx conv file These programs convert JPEG to from PPM GIF Targa The Amiga world is heavily infested with quick and dirty JPEG programs many based on an ancient beta test version of the free IJG JPEG software thanks to a certain magazine that published same on its disk of the month without so much as notifying the authors Among these are AugJPEG NewAmyJPEG VJPEG and probably others I have not even heard In my opinion anything older than IJG version March is not worth the disk space it's stored on if you have such a program trash it and get something Atari ST The free IJG JPEG software is available compiled for Atari ST TT etc from file atari Graphics These programs convert JPEG to from PPM GIF Targa For monochrome ST monitors try MGIF which manages to achieve four level grayscale effect by Version reads JPEG Available from file atari Graphics I have not heard of any other free or shareware JPEG capable viewers for Ataris but surely there must be some by now Pointers Acorn Archimedes ChangeFSI supplied with RISC OS version can convert from and view JPEG JFIF Provision is also made to convert images to JPEG although this must be done from the CLI rather than by double Recent versions since of the shareware program Translator can handle JPEG along with about other image While older versions can be found on some Archimedes bboards the current version is only available by registering with the author John Kortink Nutterbrink WJ Enschede The Price Dutch guilders about or pounds There's also a commercial product called JPEG which provides JPEG read write functionality and direct JPEG viewing as well as a host of other image format conversion and processing This is more expensive but not necessarily better than the above Contact DT Software FREEPOST Cambridge Tel NeXT ImageViewer is a PD utility that displays images and can do some format The current version reads JPEG but does not write ImageViewer is available from the standard NeXT archives at and somewhere in pub next both are currently being re organized so it's hard to point to specific sub directories Note that there is an older version floating around that does not support Portable software for almost any system If none of the above fits your situation you can obtain and compile the free JPEG conversion software described in You'll also need a viewer If your display is bits or less any GIF viewer will do fine if you have a display with more color capability try to find a viewer that can read Targa or PPM bit image There are numerous commercial JPEG offerings with more popping up every I recommend that you not spend money on one of these unless you find the available free or shareware software vastly too In that case purchase a hardware assisted Ask pointed questions about whether the product complies with the final JPEG standard and about whether it can handle the JFIF file format many of the earliest commercial releases are not and never will be compatible with anyone else's If you are looking for source code to work with Free portable C code for JPEG compression is available from the Independent JPEG Group which I A package containing our source code documentation and some small test files is available from several The official archive site for this source code is or Look under directory graphics jpeg the current release is This is a compressed TAR file don't forget to retrieve in binary You can retrieve this file by FTP or If you are on a PC and don't know how to cope with format you may prefer ZIP format which you can find at and mirror sites see NOTE above file msdos graphics This file will also be available on CompuServe in the GRAPHSUPPORT forum GO PICS library as If you have no FTP access you can retrieve the source from your nearest archive version appeared as issues of volume If you don't know how to retrieve postings see the FAQ article How to find sources referred to at the top of section The free JPEG code provides conversion between JPEG JFIF format and image files in GIF PBMPLUS PPM PGM Utah RLE and Truevision Targa file The core compression and decompression modules can easily be reused in other programs such as image The package is highly portable we have tested it on many machines ranging from PCs to We have released this software for both noncommercial and commercial Companies are welcome to use it as the basis for JPEG related We do not ask a royalty although we do ask for an acknowledgement in product literature see the README file in the distribution for details We hope to make this software industrial quality although as with anything that's free we offer no warranty and accept no The Independent JPEG Group is a volunteer organization if you'd like to contribute to improving our software you are welcome to What's all this hoopla about color quantization Most people don't have full color bit per pixel display Typical display hardware stores or fewer bits per pixel so it can display or fewer distinct colors at a To display a full color image the computer must map the image into an appropriate set of representative This process is called color quantization This is something of a misnomer color selection would be a better We're stuck with the standard usage Clearly color quantization is a lossy It turns out that for most images the details of the color quantization algorithm have MUCH more impact on the final image quality than do any errors introduced by JPEG except at the very lowest JPEG quality settings Since JPEG is a full color format converting a color JPEG image for display on bit or less hardware requires color This is true for all color JPEGs even if you feed a or less color GIF into JPEG what comes out of the decompressor is not colors but thousands of This happens because JPEG's lossiness affects each pixel a little differently so two pixels that started with identical colors will probably come out with slightly different Each original color gets smeared into a group of nearby Therefore quantization is always required to display a color JPEG on a colormapped display regardless of the image The only way to avoid quantization is to ask for gray scale Incidentally because of this effect it's nearly meaningless to talk about the number of colors used by a JPEG Even if you attempted to count the number of distinct pixel values different JPEG decoders would give you different results because of roundoff error I occasionally see posted images described as color JPEG This tells me that the poster a hasn't read this FAQ and b probably converted the JPEG from a JPEGs can be classified as color or gray scale just like photographs but number of colors just isn't a useful concept for On the other hand a GIF image by definition has already been quantized to or fewer A GIF does have a definite number of colors in its palette and the format doesn't allow more than palette For purposes of Usenet picture distribution GIF has the advantage that the sender precomputes the color quantization so recipients don't have This is also the disadvantage of GIF you're stuck with the sender's If the sender quantized to a different number of colors than what you can display you have to re quantize resulting in much poorer image quality than if you had quantized once from a full color Furthermore if the sender didn't use a high quality color quantization algorithm you're out of For this reason JPEG offers the promise of significantly better image quality for all users whose machines don't match the sender's display JPEG's full color image can be quantized to precisely match the user's display Furthermore you will be able to take advantage of future improvements in quantization algorithms there is a lot of active research in this area or purchase better display hardware to get a better view of JPEG images you already With a GIF you're stuck forevermore with what was It's also worth mentioning that many GIF viewing programs include rather shoddy quantization If you view a color GIF on a color EGA display for example you are probably getting a much worse image than you need This is partly an inevitable consequence of doing two color quantizations one to create the GIF one to display it but often it's also due to JPEG conversion programs will be forced to use high quality quantizers in order to get acceptable results at all and in normal use they will quantize directly to the number of colors to be Thus JPEG is likely to provide better results than the average GIF program for low color resolution displays as well as high resolution ones Finally an ever growing number of people have better than bit display hardware already bit hi color PC displays true bit displays on workstations and Macintoshes For these people GIF is already obsolete as it cannot represent an image to the full capabilities of their JPEG images can drive these displays much more Thus JPEG is an all around better choice than GIF for representing images in a machine independent How does JPEG work The buzz words to know are chrominance subsampling discrete cosine transforms coefficient quantization and Huffman or arithmetic entropy This article's long enough already so I'm not going to say more than that For technical information see the This is available from the archive at in files pub usenet compression faq part If you need help in using the archive see the top of this What about lossless JPEG There's a great deal of confusion on this The JPEG committee did define a truly lossless compression algorithm one that guarantees the final output is bit for bit identical to the original However this lossless mode has almost nothing in common with the regular lossy JPEG algorithm and it offers much less At present very few implementations of lossless JPEG exist and all of them are Saying Q to the free JPEG software DOES NOT get you a lossless What it does get rid of is deliberate information loss in the coefficient quantization There is still a good deal of information loss in the color subsampling With the free JPEG code you can also say sample to turn off Keep in mind that many commercial JPEG implementations cannot cope with the resulting Even with both quantization and subsampling turned off the regular JPEG algorithm is not lossless because it is subject to roundoff errors in various The maximum error is a few counts in any one pixel value it's highly unlikely that this could be perceived by the human eye but it might be a concern if you are doing machine processing of an At this minimum loss setting regular JPEG produces files that are perhaps half the size of an uncompressed bit per pixel True lossless JPEG provides roughly the same amount of compression but it guarantees bit for bit If you have an application requiring lossless storage of images with less than bits per pixel per color component you may want to look into the JBIG bilevel image compression This performs better than JPEG lossless on such JPEG lossless is superior to JBIG on images with or more bits per pixel furthermore JPEG is public domain at least with a Huffman back end while the JBIG techniques are heavily covered by Why all the argument about file formats Strictly speaking JPEG refers only to a family of compression algorithms it does not refer to a specific image file The JPEG committee was prevented from defining a file format by turf wars within the international standards Since we can't actually exchange images with anyone else unless we agree on a common file format this leaves us with a In the absence of official standards a number of JPEG program writers have just gone off to do their own thing and as a result their programs aren't compatible with anybody else' The closest thing we have to a de facto standard JPEG format is some work that's been coordinated by people at C Cube They have defined two JPEG based file formats JFIF JPEG File Interchange Format a low end format that transports pixels and not much TIFF JPEG aka TIFF an extension of the Aldus TIFF TIFF is a high end format that will let you record just about everything you ever wanted to know about an image and a lot more besides TIFF is a lot more complex than JFIF and may well prove less transportable because different vendors have historically implemented slightly different and incompatible subsets of It's not likely that adding JPEG to the mix will do anything to improve this Both of these formats were developed with input from all the major vendors of JPEG related products it's reasonably likely that future commercial products will adhere to one or both I believe that Usenet should adopt JFIF as the replacement for GIF in picture JFIF is simpler than TIFF and is available now the TIFF spec has only recently been officially adopted and it is still unusably vague on some crucial Even when TIFF JPEG is well defined the JFIF format is likely to be a widely supported lowest common denominator TIFF JPEG files may never be as A particular case that people may be interested in is Apple's QuickTime software for the QuickTime uses a JFIF compatible format wrapped inside the Mac specific PICT Conversion between JFIF and QuickTime JPEG is pretty straightforward and several Mac programs are available to do it see Mac portion of section If you have an editor that handles binary files you can strip a QuickTime JPEG PICT down to JFIF by hand see section for Another particular case is Handmade Software's programs and Image Alchemy These programs are capable of reading and writing JFIF By default though they write a proprietary format developed by This format is NOT readable by any non HSI programs and should not be used for Usenet Use the j switch to get JFIF This applies to old versions of these programs the current releases emit JFIF format by You still should be careful not to post HSI format files unless you want to get flamed by people on non PC How do I recognize which file format I have and what do I do about it If you have an alleged JPEG file that your software won't read it's likely to be HSI format or some other proprietary JPEG based You can tell what you have by inspecting the first few bytes of the file A JFIF standard file will start with the characters hex FF FF followed by two variable bytes often hex followed by 'JFIF' If you see FF at the start but not the rest of it you may have a raw JPEG This is probably decodable as is by JFIF software it's worth a try HSI files start with ' ' You're out of luck unless you have HSI Portions of the file may look like plain JPEG data but they won't decompress properly with non HSI A Macintosh PICT file if JPEG compressed will have a couple hundred bytes of header followed by a JFIF header scan for 'JFIF' Strip off everything before the FF and you should be able to read Anything else it's a proprietary format or not JPEG at If you are lucky the file may consist of a header and a raw JPEG data If you can identify the start of the JPEG data stream look for FF try stripping off everything before In uuencoded Usenet postings the characteristic JFIF pattern is begin line M C X whereas uuencoded HSI files will start with begin line M ' I If you learn to check for the former you can save yourself the trouble of downloading non JFIF What about arithmetic coding The JPEG spec defines two different back end modules for the final output of compressed data either Huffman coding or arithmetic coding is The choice has no impact on image quality but arithmetic coding usually produces a smaller compressed On typical images arithmetic coding produces a file or percent smaller than Huffman All the file size numbers previously cited are for Huffman Unfortunately the particular variant of arithmetic coding specified by the JPEG standard is subject to patents owned by IBM AT T and Thus you cannot legally use arithmetic coding unless you obtain licenses from these The fair use doctrine allows people to implement and test the algorithm but actually storing any images with it is dubious at At least in the short run I recommend that people not worry about arithmetic coding the space savings isn't great enough to justify the potential legal In particular arithmetic coding should not be used for any images to be exchanged on There is some small chance that the legal situation may change in the Stay tuned for further Does loss accumulate with repeated compression decompression It would be nice if having compressed an image with JPEG you could decompress it manipulate it crop off a border say and recompress it without any further image degradation beyond what you lost Unfortunately THIS IS NOT THE In general recompressing an altered image loses more information though usually not as much as was lost the first time The next best thing would be that if you decompress an image and recompress it without changing it then there is no further loss you get an identical JPEG Even this is not true at least not with the current free JPEG It's essentially a problem of accumulation of roundoff If you repeatedly compress and decompress the image will eventually degrade to where you can see visible changes from the first generation It usually takes many such cycles to get visible One of the things on our to do list is to see if accumulation of error can be avoided or limited but I am not optimistic about In any case the most that could possibly be guaranteed would be that compressing the unmodified full color output of djpeg at the original quality setting would introduce no further Even such simple changes as cropping off a border could cause further roundoff error If you're wondering why it's because the pixel block boundaries If you cropped off only multiples of pixels you might be safe but that's a mighty limited capability The bottom line is that JPEG is a useful format for archival storage and transmission of images but you don't want to use it as an intermediate format for sequences of image manipulation Use a lossless format PPM RLE TIFF etc while working on the image then JPEG it when you are ready to file it Aside from avoiding degradation you will save a lot of compression decompression time this way What are some rules of thumb for converting GIF images to JPEG As stated earlier you will lose some amount of image information if you convert an existing GIF image to If you can obtain the original full color data the GIF was made from it's far better to make a JPEG from But if you need to save space and have only the GIF to work from here are some suggestions for getting maximum space savings with minimum loss of The first rule when converting a GIF library is to look at each JPEG to make sure you are happy with it before throwing away the corresponding GIF that will give you a chance to re do the conversion with a higher quality setting if Some GIFs may be better left as GIFs as explained in section in particular cartoon type GIFs with sixteen or fewer colors don't convert You may find that a JPEG file of reasonable quality will be larger than the So check the sizes Experience to date suggests that large high visual quality GIFs are the best candidates for conversion to They chew up the most storage so offer the most potential savings and they convert to JPEG with least Don't waste your time converting any GIF much under Also don't expect JPEG files converted from GIFs to be as small as those created directly from full color To maintain image quality you may have to let the converted files be as much as twice as big as straight through JPEG files would be shoot for or the size of the GIF file not as suggested in earlier comparisons Many people have developed an odd habit of putting a large constant color border around a GIF While useless this was nearly free in terms of storage cost in GIF It is NOT free in JPEG files and the sharp border boundary can create visible artifacts ghost edges Do yourself a favor and crop off any border before If you are on an X Windows system XV's manual and automatic cropping functions are a very painless way to do cjpeg's default Q setting of is appropriate for full color input but for GIF inputs Q settings of to often seem to be necessary to avoid image If you apply smoothing as suggested below the higher Q setting may not be Color GIFs of photographs or complex artwork are usually dithered to fool your eye into seeing more than the colors that GIF can actually If you enlarge the image you will see that adjacent pixels are often of significantly different colors at normal size the eye averages these pixels together to produce the illusion of an intermediate color The trouble with dithering is that to JPEG it looks like high spatial frequency color noise and JPEG can't compress noise very The resulting JPEG file is both larger and of lower image quality than what you would have gotten from JPEGing the original full color image if you had it To get around this you want to smooth the GIF image before Smoothing averages together nearby pixels thus approximating the color that you thought you saw anyway and in the process getting rid of the rapid color changes that give JPEG Appropriate use of smoothing will often let you avoid using a high Q factor thus further reducing the size of the compressed file while still obtaining a better looking output image than you'd get without With the free JPEG software or products based on it a simple smoothing capability is built Try smooth or so when converting Values of to seem to work well for high quality Heavy handed dithering may require larger smoothing If you can see regular fine scale patterns on the GIF image even without enlargement then strong smoothing is definitely called Too large a smoothing factor will blur the output image which you don't If you are an image processing wizard you can also do smoothing with a separate filtering program such as pnmconvol from the PBMPLUS However cjpeg's built in smoother is a LOT faster than The upshot of all this is that cjpeg quality smooth is probably a good starting point for converting But if you really care about the image you'll want to check the results and maybe try a few other For more information about JPEG in general or the free JPEG software in particular contact the Independent JPEG Group at tom lane organizer Independent JPEG Group Internet BITNET tgl carnegie